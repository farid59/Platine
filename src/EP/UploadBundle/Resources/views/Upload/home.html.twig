{% extends "EPUploadBundle::layout.html.twig" %}

{% block body %}

    <div class="row">   
        <div class="col-lg-12">
            <div class="box ">
                <div class="box-header">
                    <h2><i class="fa fa-bar-chart-o"></i><span class="break"></span>Mes indicateurs</h2>
                </div>
                <div class="box-content">
                    
                    <div class="col-sm-2 col-sm-offset-2">
                        <a class="quick-button">
                            <i class="fa fa-group"></i>
                            <p>Nombre de clients</p>
                            <span class="notification blue">{{ count.clients }}</span>
                        </a>
                    </div>
                    <div class="col-sm-2">
                        <a class="quick-button">
                            <i class="fa fa-shopping-cart"></i>
                            <p>Nombre de produits</p>
                            <span class="notification green">{{ count.produits }}</span>
                        </a>
                    </div>
                    <div class="col-sm-2">
                        <a class="quick-button">
                            <i class="fa fa-file"></i>
                            <p>Nombre de fichiers</p>
                            <span class="notification red">{{ count.fichiers }}</span>
                        </a>
                    </div>
                    <div class="col-sm-2">
                        <a class="quick-button">
                            <i class="fa fa-pencil-square"></i>
                            <p>Nombre de factures</p>
                            <span class="notification orange">{{ count.factures }}</span>
                        </a>
                    </div>
                    <div class="clearfix">
                    </div>
                </div>  
            </div>  
        </div><!--/col-->
        
    </div><!--/row-->






    <div class="col-lg-4">
        <div class="box">
            <div class="box-header">
                <h2><i class="fa fa-user"></i><span class="break"></span>Derniers clients</h2>
                <div class="box-icon">
                    <a href="{{ path('ep_show_client') }}" data-rel="tooltip" title="Voir plus"><i class="fa fa-eye"></i></a>
                </div>
            </div>
            <div class="box-content">
                <table class="table table-bordered table-striped table-condensed">
                      <thead>
                            <tr>
                                <th class="col-xs-8">Nom, Prénom</th>
                                <th class="col-xs-4">Société</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for client in clients %}
                                <tr>
                                    <td>{{ client.nom }}, {{ client.prenom }}</td>
                                    <td>{{ client.societe }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                 </table>       
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="box">
            <div class="box-header">
                <h2><i class="fa fa-shopping-cart"></i><span class="break"></span>Derniers produits</h2>
                <div class="box-icon">
                    <a href="{{ path('ep_show_produit') }}" data-rel="tooltip" title="Voir plus"><i class="fa fa-eye"></i></a>
                </div>
            </div>
            <div class="box-content">
                <table class="table table-bordered table-striped table-condensed">
                      <thead>
                            <tr>
                                <th class="col-xs-3">référence</th>
                                <th class="col-xs-6">désignation</th>
                                <th class="col-xs-3">prix HT</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for produit in produits %}
                                <tr>
                                    <td>{{ produit.reference }}</td>
                                    <td>{{ produit.designation }}</td>
                                    <td>{{ produit.montantUnitaireHT }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                 </table>       
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="box">
            <div class="box-header">
                <h2><i class="fa fa-file"></i><span class="break"></span>Derniers fichiers</h2>
                <div class="box-icon">
                    <a href="{{ path('ep_view_file') }}" data-rel="tooltip" title="Voir plus"><i class="fa fa-eye"></i></a>
                </div>
            </div>
            <div class="box-content">
                <table class="table table-bordered table-striped table-condensed">
                      <thead>
                            <tr>
                                <th class="col-xs-7">nom</th>
                                <th class="col-xs-2">catégorie</th>
                                <th class="col-xs-3">etat</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for fichier in fichiers %}
                                <tr>
                                    <td class="col-xs-7">
                                        <span class="show-xs hidden-sm hidden-md hidden-lg">{{ fichier.name|truncate(30, false, '...') }}</span>
                                        <span class="hidden-xs show-sm hidden-md hidden-lg">{{ fichier.name|truncate(40, false, '...') }}</span>
                                        <span class="hidden-xs hidden-sm show-md hidden-lg">{{ fichier.name|truncate(60, false, '...') }}</span>
                                        <span class="hidden-xs hidden-sm hidden-md show-lg">{{ fichier.name|truncate(30, false, '...') }}</span>
                                    </td>
                                    <td class="col-xs-2">{{ fichier.category.name }}</td>
                                    <td class="col-xs-3">

                                        {% if fichier.treated is null %}
                                            <span class="label label-info col-xs-10 col-xs-push-1">En attente</span>
                                        {% else %}
                                            <span class="label label-success col-xs-10 col-xs-push-1">Traité</span>
                                        {% endif %}

                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                 </table>       
            </div>
        </div>
    </div>
{% endblock %}



{% block old_body %}
    
    <h2>Accueil</h2>

    <div class="row">
        
        <div class="col-xs-4">
            <div class="panel panel-success">
                <div class="panel-heading">
                    Vos derniers clients
                    <a href="{{ path('ep_show_client') }}" class="btn btn-success pull-right">Voir plus</a>
                    <div class="clearfix"></div>
                </div>
                <div class="panel-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="col-xs-8">Nom, Prénom</th>
                                <th class="col-xs-4">Société</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for client in clients %}
                                <tr>
                                    <td>{{ client.nom }}, {{ client.prenom }}</td>
                                    <td>{{ client.societe }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="col-xs-4">
            <div class="panel panel-success">
                <div class="panel-heading">
                    Vos derniers produits
                    <a href="{{ path('ep_show_produit') }}" class="btn btn-success pull-right">Voir plus</a>
                    <div class="clearfix"></div>
                </div>
                <div class="panel-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="col-xs-1">référence</th>
                                <th class="col-xs-8">désignation</th>
                                <th class="col-xs-3">prix HT</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for produit in produits %}
                                <tr>
                                    <td>{{ produit.reference }}</td>
                                    <td>{{ produit.designation }}</td>
                                    <td>{{ produit.montantUnitaireHT }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="col-xs-4">
            <div class="panel panel-success">
                <div class="panel-heading">
                    Vos derniers fichiers
                    <a href="{{ path('ep_view_file') }}" class="btn btn-success pull-right">Voir plus</a>
                    <div class="clearfix"></div>
                </div>
                <div class="panel-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="col-xs-7">nom</th>
                                <th class="col-xs-2">catégorie</th>
                                <th class="col-xs-3">etat</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for fichier in fichiers %}
                                <tr>
                                    <td class="col-xs-7">{{ fichier.name|truncate(25, false, '...') }}</td>
                                    <td class="col-xs-2">{{ fichier.category.name }}</td>
                                    <td class="col-xs-3">

                                        {% if fichier.treated is null %}
                                            <span class="label label-info col-xs-10 col-xs-push-1">En attente</span>
                                        {% else %}
                                            <span class="label label-success col-xs-10 col-xs-push-1">Traité<br/>le {{ fichier.treated|date("Y-m-d") }}</span>
                                        {% endif %}

                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>


    <div class="row">
        
        <div class="col-xs-6">
            <div class="panel panel-success">
                <div class="panel-heading">
                    tab 4
                </div>
                <div class="panel-body">
                    
                </div>
            </div>
        </div>
        
        <div class="col-xs-6">
            <div class="panel panel-success">
                <div class="panel-heading">
                    tab 5
                </div>
                <div class="panel-body">
                    
                </div>
            </div>
        </div>

    </div>

{% endblock %}